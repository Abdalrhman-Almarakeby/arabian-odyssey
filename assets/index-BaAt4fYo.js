import{j as e,r as n,f as k,a as b,M as w,n as A,o as F,S as D,_ as M,l as q,c as H,d as E,N as f}from"./index-C3JP5WYM.js";import{C as I,a as L,b as P,c as z,S as O,d as R,e as T}from"./angle-left-ym1vyXQH.js";import{R as _}from"./RatedSlideCard-BHBZbj_D.js";import{I as h,S as $}from"./SubmitButton-CIfMzCjX.js";function j({attractions:a}){return e.jsxs(I,{opts:{align:"start"},className:"w-full px-8",children:[e.jsx(L,{className:"relative -ml-5",children:a.map(({id:c,image:o,rating:s,name:d})=>e.jsx(P,{className:"pl-5 shadow-xl md:basis-1/2 lg:basis-1/3",children:e.jsx(_,{to:`/attraction/${c}`,locationName:d,image:o.path,rating:s})},d))}),e.jsx(z,{className:"absolute -left-[15px] top-1/2 grid size-[40px] -translate-y-1/2 place-items-center rounded-full border bg-white",children:e.jsx(O,{className:"w-[15px] fill-primary"})}),e.jsx(R,{className:"absolute -right-[15px] top-1/2 grid size-[40px] -translate-y-1/2 place-items-center rounded-full border bg-white",children:e.jsx(T,{className:"w-[15px] fill-primary"})})]})}function B({setDisplayModal:a,displayModal:c}){const[o,s]=n.useState("unsubmited"),[d,m]=n.useState(),[x,g]=n.useState(),[u,y]=n.useState([]),[p,N]=n.useState([]),[l,v]=n.useState({name:"",country:"",state:"",category:"",desc:"",openingHours:"",admissionFees:"",image:"",images:[]}),{token:S}=k();n.useEffect(()=>{if(x){const t=x.find(r=>r.id===l.country);t&&y(t.states)}},[l.country]),n.useEffect(()=>{b.get("https://arabian-odyssey.vercel.app/country").then(t=>t.data).then(t=>g(t.country)),b.get("https://arabian-odyssey.vercel.app/category").then(t=>t.data).then(t=>N(t.category))});function C(t){t.preventDefault(),s("submiting"),l.images.push(l.image),b.post("https://arabian-odyssey.vercel.app/attraction",l,{headers:{token:`ArabianOdyssey__${S}`,"Content-Type":"multipart/form-data"}}).then(()=>m(!0)).catch(()=>{m(!1),M.error("An Error Occurred. Please try later.")}).finally(()=>s("submited"))}function i(t){v(r=>({...r,[t.target.name]:t.target.value}))}return e.jsxs(w,{show:c,onClose:()=>a(!1),children:[e.jsx(A,{children:e.jsxs("p",{children:["Create attraction - ",e.jsx("span",{className:"text-red-500",children:"not available currently"})]})}),e.jsx(F,{children:o==="unsubmited"?e.jsxs("form",{className:"space-y-4 md:space-y-6",method:"POST",onSubmit:C,encType:"multipar/form-data",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"mb-2 block text-sm font-medium text-black",children:"Attraction name"}),e.jsx(h,{type:"text",name:"name",id:"name",value:l.name,onChange:i,placeholder:"Atraction name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"mb-2 block text-sm font-medium text-black",children:"Country"}),e.jsxs("select",{name:"country",id:"country",onChange:i,required:!0,className:"w-full",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select country"}),x==null?void 0:x.map((t,r)=>e.jsx("option",{value:t.id,children:t.name},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:"mb-2 block text-sm font-medium text-black",children:"State"}),e.jsxs("select",{name:"state",id:"state",onChange:i,required:!0,className:"w-full",children:[e.jsx("option",{disabled:!0,selected:!0,children:u.length?"Select state":"Select country"}),u==null?void 0:u.map((t,r)=>e.jsx("option",{value:t.id,children:t.name},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"mb-2 block text-sm font-medium text-black",children:"Category"}),e.jsxs("select",{name:"category",id:"category",onChange:i,required:!0,className:"w-full",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select category"}),p==null?void 0:p.map((t,r)=>e.jsx("option",{value:t.id,children:t.name},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"openingHours",className:"mb-2 block text-sm font-medium text-black",children:"Opening Hours"}),e.jsx(h,{type:"text",name:"openingHours",id:"openingHours",value:l.openingHours,onChange:i,placeholder:"9AM-6PM daily",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admissionFees",className:"mb-2 block text-sm font-medium text-black",children:"Admission Fees"}),e.jsx(h,{type:"text",name:"admissionFees",id:"admissionFees",value:l.admissionFees,onChange:i,placeholder:"10$ Adults, 6$ children",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image",className:"mb-2 block text-sm font-medium text-black",children:"Image"}),e.jsx(h,{type:"file",name:"image",id:"image",accept:"image/*",value:l.image,onChange:i,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"desc",className:"mb-2 block text-sm font-medium text-black",children:"Description"}),e.jsx("textarea",{name:"desc",id:"desc",className:"min-h-[100px] w-full",value:l.desc,onChange:i,placeholder:"Description",required:!0})]}),e.jsx($,{children:"Create"})]}):o==="submiting"?e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsx(D,{size:"xl",color:"primary"})}):d?e.jsx("p",{className:"text-center text-primary",children:"Attraction created successfully"}):e.jsx("p",{className:"text-center text-red-500",children:"Unable to create attraction"})})]})}function U({user:a}){const c=new Date(a.createdAt).toDateString();return e.jsxs("div",{className:"flex w-full flex-col items-center",children:[e.jsx("h2",{className:"mb-10 text-3xl font-bold",children:"About"}),e.jsxs("div",{className:"mb-4 flex flex-col items-center gap-6 px-5 py-2 shadow sm:flex-row",children:[e.jsxs("div",{className:"flex flex-col items-center sm:items-start",children:[e.jsx("p",{className:"mb-2 text-xl font-bold",children:a.name}),e.jsx("p",{className:"font-light",children:a.email}),e.jsxs("p",{className:"font-light",children:["Gender: ",a.gender]}),e.jsxs("p",{className:"font-light",children:["Member since: ",c]})]}),e.jsx(q,{className:"size-40"})]})]})}function K({isSearchMenuOpen:a,setIsSearchMenuOpen:c}){const o=H(),{user:s}=E(),[d,m]=n.useState(!1);return n.useEffect(()=>{s||o("/")},[o,s]),s&&e.jsxs("div",{className:"container flex-grow px-6 pb-[100px] pt-10",children:[e.jsx("section",{className:"mb-24",children:e.jsx(U,{user:s})}),e.jsxs("section",{className:"mb-24",children:[e.jsx("h2",{className:"mb-10 text-xl font-bold",children:"WishList"}),s.WishList.length?e.jsx(j,{attractions:s.WishList}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(f,{}),e.jsx("button",{onClick:()=>c(!a),className:"mt-3 rounded-[100px] bg-primary px-3 py-2 text-base text-white",children:"Browse attractions"})]})]}),e.jsxs("section",{className:"flex flex-col items-center",children:[e.jsx("h2",{className:"mb-10 self-start text-xl font-bold",children:"Your contributions"}),s.attractionsAdded.length?e.jsx(j,{attractions:s.attractionsAdded}):e.jsx(f,{}),e.jsx("button",{onClick:()=>m(!d),className:"mt-4 rounded-[100px] bg-primary px-3 py-2 text-base text-white",children:"Create attraction"})]}),e.jsx(B,{setDisplayModal:m,displayModal:d})]})}export{K as Profile};
