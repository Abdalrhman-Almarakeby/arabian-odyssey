import{b,c as j,r as c,d as y,j as e,L as w,e as u,a as v,_ as l}from"./index-C3JP5WYM.js";import{I as i,S as N}from"./SubmitButton-CIfMzCjX.js";function C(){const{setSignupEmail:h}=b(),o=j(),[a,x]=c.useState({name:"",email:"",password:"",cpassword:""}),[p,m]=c.useState(!1),{user:d}=y();c.useEffect(()=>{d&&o("/")},[o,d]);function g(t){t.preventDefault(),m(!0),h(a.email),v.post("https://arabian-odyssey.vercel.app/auth/signup",JSON.stringify(a),{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then(s=>s.data).then(s=>{if(s.message==="success"){l.success("User created successfully. Check your email for confirmation."),o("/confirm-email");return}l.error("An Error Occurred. Pleas try later.")}).catch(s=>{if(s.response){const n=s.response.data.err;if(typeof n!="string")return n.forEach(f=>l.error(f.message));l.error(n==="user already exist"?e.jsxs(e.Fragment,{children:["User already exist. consider",e.jsx(e.Fragment,{children:" "}),e.jsx(u,{to:"/signin",className:"underline",children:"Sing in"})]}):n)}}).finally(()=>m(!1))}function r(t){x(s=>({...s,[t.target.name]:t.target.value}))}return e.jsxs("section",{className:"flex flex-grow flex-col items-center pt-6",children:[p&&e.jsx(w,{}),e.jsx("div",{className:"w-full rounded-lg bg-white shadow sm:max-w-md md:mt-0 xl:p-0",children:e.jsxs("div",{className:"space-y-4 p-6 sm:p-8 md:space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight text-black md:text-2xl",children:"Create an account"}),e.jsxs("form",{className:"space-y-4 md:space-y-6",method:"POST",onSubmit:g,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"mb-2 block text-sm font-medium text-black",children:"Your full name"}),e.jsx(i,{type:"text",name:"name",id:"name",minLength:3,maxLength:30,value:a.name,onChange:r,placeholder:"John Doe",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"mb-2 block text-sm font-medium text-black",children:"Email"}),e.jsx(i,{type:"email",name:"email",id:"email",value:a.email,onChange:r,placeholder:"John_doe@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"mb-2 block text-sm font-medium text-black",children:"Password"}),e.jsx(i,{type:"password",name:"password",id:"password",minLength:3,value:a.password,onChange:r,placeholder:"••••••••",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"mb-2 block text-sm font-medium text-black",children:"Confirm Password"}),e.jsx(i,{type:"password",name:"cpassword",id:"confirmPassword",value:a.cpassword,onChange:r,placeholder:"••••••••",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-black transition focus:border-primary focus:ring-primary sm:text-sm",required:!0})]}),e.jsx(N,{children:"Create an account"}),e.jsxs("p",{className:"text-sm font-light text-gray-500",children:["Already have an account?"," ",e.jsx(u,{className:"font-medium text-primary hover:underline",to:"/signin",children:"Sign in here"})]})]})]})})]})}export{C as Signup};
