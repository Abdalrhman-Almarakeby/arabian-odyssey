import{c as j,d as N,f as k,r as o,j as e,M as c,_ as t,a as u}from"./index-C3JP5WYM.js";function S(){const d=j(),{setUser:p,user:a}=N(),{token:n,setToken:b}=k(),[x,i]=o.useState(!1),[r,h]=o.useState({oldpassword:"",password:"",cpassword:""}),[m,f]=o.useState("");function y(s){s.preventDefault(),t("Updating..."),u.patch("https://arabian-odyssey.vercel.app/user/password",JSON.stringify(r),{headers:{token:`ArabianOdyssey__${n}`,"Content-Type":"application/json"}}).then(()=>t.success("Successfully updated your password")).catch(()=>t.error("We are unable to update you password"))}function g(s){if(s.preventDefault(),m!==(a==null?void 0:a.email)){t.error("Entered email doesn't match actual email");return}u.delete("https://arabian-odyssey.vercel.app/user",{headers:{token:`ArabianOdyssey__${n}`}}).then(()=>{t.success("Successfully deleted you account"),p(null),b("")}).catch(()=>t.error("We are unable to delete you account"))}function l(s){h(w=>({...w,[s.target.name]:s.target.value}))}return o.useEffect(()=>{a||d("/")},[d,a]),a&&e.jsxs("div",{className:"container flex-grow px-4",children:[e.jsx("h1",{className:"mb-10 mt-5 text-2xl font-bold text-center",children:"Settings"}),e.jsxs("section",{className:"mb-15",children:[e.jsx("h2",{className:"text-base font-bold mb-8",children:"Change password"}),e.jsxs("form",{method:"POST",onSubmit:y,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"oldpassword",className:"mb-2 block text-sm font-medium text-black",children:"Old password"}),e.jsx("input",{type:"text",name:"oldpassword",id:"oldpassword",value:r.oldpassword,onChange:l,className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-black focus:border-primary focus:ring-primary sm:text-sm",placeholder:"••••••••",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"mb-2 block text-sm font-medium text-black",children:"Password"}),e.jsx("input",{type:"password",name:"password",id:"password",value:r.password,onChange:l,placeholder:"••••••••",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-black focus:border-primary focus:ring-primary sm:text-sm",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"cpassword",className:"mb-2 block text-sm font-medium text-black",children:"Repat password"}),e.jsx("input",{type:"cpassword",name:"cpassword",id:"cpassword",value:r.cpassword,onChange:l,placeholder:"••••••••",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-black focus:border-primary focus:ring-primary sm:text-sm",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full rounded-lg bg-primary/90 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-black",children:"Update"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-base font-bold mb-4",children:"Delete account"}),e.jsx("button",{className:"text-sm bg-red-500 py-2 px-4 rounded text-white mb-2",onClick:()=>i(!0),children:"Delete account"}),e.jsx("p",{className:"text-red-500",children:"This action is irreversible !"})]}),e.jsxs(c,{show:x,onClose:()=>i(!1),children:[e.jsx(c.Header,{children:"Delete account"}),e.jsx(c.Body,{children:e.jsxs("form",{method:"POST",onSubmit:g,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"cpassword",className:"mb-2 block text-sm font-medium text-black",children:["Type ",e.jsx("span",{className:"font-bold",children:a.email})," to delete your account"]}),e.jsx("input",{type:"email",name:"email",id:"email",value:m,onChange:s=>f(s.target.value),placeholder:"name@email.com",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-black focus:border-primary focus:ring-primary sm:text-sm",required:!0})]}),e.jsx("button",{className:"text-sm bg-red-500 py-2 px-4 rounded text-white mb-2",children:"Delete account"})]})})]})]})}export{S as Settings};
