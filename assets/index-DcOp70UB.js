import{r as o,f as j,c as y,d as b,j as e,L as v,e as d,a as w,_ as n}from"./index-C3JP5WYM.js";import{I as u,S as N}from"./SubmitButton-CIfMzCjX.js";function L(){const[r,h]=o.useState({email:"",password:""}),[x,l]=o.useState(!1),{setToken:p}=j(),i=y(),{user:c}=b();o.useEffect(()=>{c&&i("/")},[i,c]);function g(a){a.preventDefault(),l(!0),w.post("https://arabian-odyssey.vercel.app/auth/signin",JSON.stringify(r),{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}).then(s=>s.data).then(s=>{if(s.message==="success"){n.success("Logged in successfully."),p(s.token),setTimeout(()=>i("/"),10);return}n.error("An Error Occurred. Please try later.")}).catch(s=>{if(s.response){const t=s.response.data.err;if(typeof t!="string")return t.forEach(f=>n.error(f.message));n.error(t==="email not exist "?e.jsxs(e.Fragment,{children:["User doesn't exist consider",e.jsx(e.Fragment,{children:" "}),e.jsx(d,{to:"/signup",className:"underline",children:"Sing up"})]}):t)}}).finally(()=>l(!1))}function m(a){h(s=>({...s,[a.target.name]:a.target.value}))}return e.jsxs("section",{className:"flex flex-grow flex-col items-center pt-6",children:[x&&e.jsx(v,{}),e.jsx("div",{className:"w-full rounded-lg bg-white shadow sm:max-w-md md:mt-0 xl:p-0",children:e.jsxs("div",{className:"space-y-4 p-6 sm:p-8 md:space-y-6",children:[e.jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight text-black md:text-2xl",children:"Welcome again!"}),e.jsxs("form",{className:"space-y-4 md:space-y-6",method:"POST",onSubmit:g,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"mb-2 block text-sm font-medium text-black",children:"Email"}),e.jsx(u,{type:"email",name:"email",id:"email",value:r.email,onChange:m,placeholder:"John_doe@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"mb-2 block text-sm font-medium text-black",children:"Password"}),e.jsx(u,{type:"password",name:"password",id:"password",minLength:3,value:r.password,onChange:m,placeholder:"••••••••",required:!0})]}),e.jsx(N,{children:"Log in"}),e.jsxs("p",{className:"text-sm font-light text-gray-500",children:["Don't have an account?"," ",e.jsx(d,{className:"font-medium text-primary hover:underline",to:"/signup",children:"Sing up here"})]})]})]})})]})}export{L as Signin};
